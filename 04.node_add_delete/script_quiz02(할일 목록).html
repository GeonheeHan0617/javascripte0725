<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>할일 목록 만들기</h1>

    <form class="nameForm">
        <h2 class="nameTitle"></h2>
        <input type="text" placeholder="당신의 이름은?">
        <button type="button">확인</button>
    </form>

    <!-- <form class="todoForm">
    <input type="text" placeholder="당신의 할일?">
    <button type="button">확인</button>
</form> -->
    <form class="todoForm">
        <input type="text" placeholder="당신의 할일?">
        <button type="button">확인</button>
    </form>

    <ul class="todoList">

    </ul>

    <script>
        //이름 값 입력!!
        var nameForm = document.querySelector(".nameForm");
        var nameTitle = nameForm.querySelector(".nameTitle");
        var nameInput = nameForm.querySelector("input");
        var nameButton = nameForm.querySelector("button");

        nameButton.addEventListener("click", regist);
        /*         console.log(nameTitle.value); */

        function regist() {
            nameTitle.innerHTML = nameInput.value + "님 안녕하세요";
            nameInput.style.display = "none"; // input 숨김
            nameButton.style.display = "none";  // button 숨김 
        }
        // 할일 
        var todoForm = document.querySelector(".todoForm");
        /*         console.log(todoForm); */
        var todoInput = todoForm.querySelector("input");
        var todoButton = todoForm.querySelector("button");
        // up, down 생성 //////////////////
        /*      var todoDown = todoForm.querySelector("todoDown"); */

        /*         console.log("button"); */
        todoButton.addEventListener("click", handleTodo);
        // up, down 생성 /////////////////
        /*      todoDown.addEventListener("click", createDown ); */

        function handleTodo() {
            /*  if(todoInput.value === ""){
                   /*    console.log(todoInput.value); */
            createTodo(todoInput.value);
            todoInput.value = ""; // 할일 초기화
        }


        function createTodo(text) {  //안에 다가 text값 넣어야됨  ////button 화면 생성
            /*   console.log(text); */
            var ul = document.querySelector(".todoList"); //리스트 목록

            //삭제 버톤 새로 배움
            var btn = document.createElement("button"); //delete button
            btn.innerHTML = " X";
            btn.addEventListener("click", deleteTodo);
                                                                                     /* console.log(btn); */
            // 이동 버톤 생성 후 up함수 (eventListener) 기반으로 up 함수, down 함수를 연결

            var btn2 = document.createElement("button"); // up button
            btn2.innerHTML = "↑";
            btn2.addEventListener("click", todoUp);
                                                                                         /*           console.log(btn2); */

            var btn3 = document.createElement("button"); //down button 
            btn3.innerHTML = "↓";
            btn3.addEventListener("click", todoDown);
                                                                                        /*      console.log(btn3); */

            //li 생성
            li = document.createElement("li");
            li.innerHTML = text;

            li.appendChild(btn); // li버톤 생성 
            li.appendChild(btn2);
            li.appendChild(btn3);
            ul.appendChild(li); //ul에 li 를 추가  // 삭제 버톤이랑  화살표 up down과  같이 두기 

        }
        /* 
               function createDown(down) {
                        var ul= document.querySelector(".todoList");
        
                        var btn = document.createElement("button")
                        btn.innerHTML = "↓";
                       btn.addEventListener("click", downTodo); 
                        console.log(btn);
        
                        li = document.createElement("li");
                        li.innerHTML = down;
                        li.appendChild(btn);
                        
                        ul.appendChild(li) 
            
        
                    } */
        function todoUp() {   // up 동작 기능
            var todoList = document.querySelector(".todoList");
                                                                     /*    console.log(event.target); */
            var current = event.target.parentElement;
            var previous = current.previousElementSibling;
                                                                         /*  console.log(event.target.parentElement);
                                                                          console.log(current.parentElementSibling); */

            if (previous === null) return;
            if (confirm("이동하시겠습니끼?")) {
                console.log(current, previous);
                todoList.insertBefore(previous, current.nextElementSibling);
            } else {
                return;
            }
        }

        function todoDown() { //down 동작 기능

            var todoList = document.querySelector(".todoList");
            var current = event.target.parentElement;
            var next = current.nextElementSibling;
                                                                        /*   console.log(current.nextElementSibling); */
            if (next === null) return;
            if (confirm("이동하시겠습니까? ")) {
                todoList.insertBefore(current, next.nextElementSibling);

            } else {
                return;
            }
        }
        
        //삭제 함수
        function deleteTodo() { //delete 동작 기능

            /*console.log(arguments[0]);
            console.log(event.target); //확인하기*/
            var todoList = document.querySelector(".todoList"); // delete 1
            todoList.removeChild(event.target.parentElement);

            console.log(this);
            /*     console.log("active");  */ //삭제되는지 확인
        }

        /*    오타난것
             var todoForm = document.querySelector(".todoForm"); //한개만 남길때
             var nameInput = todoForm.querySelector("input");
             var nameButton = todoForm.querySelector("button");
     
             nameButton.addEventListener("click" , enroll);
     
             function enroll() {
               todoList.innerHTML = nameInput2.value +"라고 남겼습니다."; }  */

    </script>

    <!--   <script> 오타난것
        var count = 0 ;
         var todoForm = document.querySelector(".todoForm"); 
        var add = document.getElementById("add");

        add.onclick =function() {
            var li = document.createElement("li");

            var text = document.createTextNode(++count);

            text.innerHTML += " ";
            li.appendChild(text);
  


            document.querySelector(".outputForm").appendChild(li);
    }
    </script>

 -->


</body>

</html>