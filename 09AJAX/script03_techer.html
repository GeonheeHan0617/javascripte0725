<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<script>

    //다시한번해보기
    function ajax(position) { // 위치정보를 확인 했을때 실행시켜주는 성공 함수 // success(position) 
                console.log(position); // 확인해보기
                console.log("위도: " + position.coords.latitude);
                console.log("경도: " + position.coords.longitude);

                fetch('https://8oi9s0nnth.apigw.ntruss.com/corona19-masks/v1/storesByGeo/json?lat=${lst}&lng=${lng}&m=1000').then(function (response) {
                    if (response.status !== 200) {
                        alert("서버와 통신이 연결이 실패했습니다.");
                        return;
                    } else {
                        return response.json();
                    }
                }).then(function (jsondata) {
                    /* console.log(jsondata); 
                    console.log(jsondata.stores);  */
                    console.log(jsondata.stores);

                
                })
            }
                function coorfail() { // 위치정보 확인에 실패 했을 때 실행시켜주는 실패 함수
                    alert("위치정보 수신에 동의해야 합니다.");
                    /*     location.href="경로";  */
                }
                (function () {
                    /*  console.dir(navigator); 
                      console.log(navigator.appName);  */ // 접속한 브라우저 정보


                    navigator.geolocation.getCurrentPosition(ajax, coorFail);
                }) ();

        
                
        </script>
</body>
</html>